{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["const gallery = document.querySelector('.gallery');\n\nexport const renderGallery = images => {\n  return images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${largeImageURL}\">\n    <img\n      class=\"gallery-image\"\n  src=\"${webformatURL}\"\n  data-source=\"${largeImageURL}\"\n  tags=\"${tags}\"\n  data-likes=\"${likes}\"\n  data-views=\"${views}\"\n  data-comments=\"${comments}\"\n  data-downloads=\"${downloads}\"\n  alt=\"Image description\"\n    />\n  </a>\n  <div >\n  <ul class=\"stats\">\n    <li class=\"stat-item\">\n    <div class=\"stat-header\">Likes</div>\n    <div class=\"stat-value\">${likes}</div>\n    </li>\n    <li class=\"stat-item\">\n    <div class=\"stat-header\">Views</div>\n    <div class=\"stat-value\">${views}</div>\n    </li>\n    <li class=\"stat-item\">\n    <div class=\"stat-header\">Comments</div>\n    <div class=\"stat-value\">${comments}</div>\n    </li>\n    <li class=\"stat-item\">\n    <div class=\"stat-header\">Downloads</div>\n    <div class=\"stat-value\">${downloads}</div>\n    </li>\n  </ul>\n</div>\n</li>`;\n      }\n    )\n    .join('');\n};\n","import axios from 'axios';\n\nconst API_KEY = '45172524-3969727cd49dc0a3e64f2f5a7';\naxios.defaults.baseURL = 'https://pixabay.com';\n\nexport const apiCall = (searchValue, page, itemPerPage) => {\n  const searchParams = {\n    params: {\n      key: API_KEY,\n      q: searchValue,\n      page: page,\n      per_page: itemPerPage,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n    },\n  };\n  return axios.get('/api/', searchParams);\n};\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport * as render from './js/render-functions.js';\nimport * as apiCalls from './js/pixabay-api.js';\nimport iziToast from 'izitoast';\n\nconst searchForm = document.querySelector('.search__form');\nconst loaderPlaceholder = document.querySelector('.js__loader');\nconst galleryEL = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more__button');\n\nconst itemPerPage = 15;\nlet currentPage = 1;\nlet searchValue = '';\n\nconst onSearchFormSubmit = async event => {\n\n  loaderPlaceholder.classList.remove('is-hidden');\n\n  try {\n    event.preventDefault();\n    currentPage = 1;\n    searchValue = event.target.elements.user_query.value.trim();\n    loadMoreBtn.classList.add('visually-hidden');\n    \n\n    if (searchValue === '') {\n      iziToast.error({\n        message: 'Input something to search!',\n        position: 'topRight',\n      });\n      loaderPlaceholder.classList.add('is-hidden');\n      searchForm.reset();\n      galleryEl.innerHTML = '';\n      return;\n    }\n\n    const { data } = await apiCalls.apiCall(\n      searchValue,\n      currentPage,\n      itemPerPage\n    );\n\n    const { hits } = data;\n    if (!hits || hits.length === 0) {\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      loaderPlaceholder.classList.add('is-hidden');\n\n      searchForm.reset();\n      galleryEl.innerHTML = '';\n      return;\n    }\n    const galleryHTML = render.renderGallery(hits);\n    galleryEL.innerHTML = galleryHTML;\n    gallery.refresh();\n\n    scrollGalleryIntoView()\n\n    searchForm.reset();\n    loaderPlaceholder.classList.add('is-hidden');\n    loadMoreBtn.classList.remove('visually-hidden');\n\n  } catch (err) {\n    iziToast.error({\n      message: 'Please, try again!',\n      position: 'topRight',\n    });\n  }\n};\n\nconst gallery = new SimpleLightbox('.gallery a', {\n  captionsData: 'tags',\n  captionDelay: 250,\n});\n\nconst onLoadMoreBtnClick = async event => {\n  try {\n    currentPage += 1;\n    loaderPlaceholder.classList.remove('is-hidden');\n    const { data } = await apiCalls.apiCall(\n      searchValue,\n      currentPage,\n      itemPerPage\n    );\n\n    const { hits, totalHits } = data;\n\n    if (data.length === 0) {\n      loadMoreBtn.classList.add('visually-hidden');\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n      loaderPlaceholder.classList.add('is-hidden');\n      return;\n    }\n\n    const nextGalleryItems = render.renderGallery(hits);\n    galleryEL.insertAdjacentHTML('beforeend', nextGalleryItems);\n    gallery.refresh();\n\n    loaderPlaceholder.classList.add('is-hidden');\n\n    if (currentPage * itemPerPage >= totalHits) {\n      loadMoreBtn.classList.add('visually-hidden');\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n  }\n\n    scrollGalleryIntoView();\n\n  } catch (err) {\n    iziToast.error({\n      message: 'Please, try again!',\n      position: 'topRight',\n    });\n  }\n};\n\nfunction scrollGalleryIntoView() {\n  const galleryItem = document.querySelector('.gallery-item');\n  if (galleryItem) {\n    const height = galleryItem.getBoundingClientRect().height;\n    window.scrollBy({ top: height * 2, behavior: 'smooth' });\n  }\n}\n\n\nloadMoreBtn.addEventListener('click', onLoadMoreBtnClick);\nsearchForm.addEventListener('submit', onSearchFormSubmit);\n"],"names":["renderGallery","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","API_KEY","axios","apiCall","searchValue","page","itemPerPage","searchParams","searchForm","loaderPlaceholder","galleryEL","loadMoreBtn","currentPage","onSearchFormSubmit","event","iziToast","data","apiCalls.apiCall","hits","galleryHTML","render.renderGallery","gallery","scrollGalleryIntoView","SimpleLightbox","onLoadMoreBtnClick","totalHits","nextGalleryItems","galleryItem","height"],"mappings":"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"}